{% extends 'base.html' %}
{% load static %}

{% block title %}Payslip - {{ payroll.employee_name }}{% endblock %}

{% block content %}
<!-- Page Header -->
<div class="page-header">
    <div class="row align-items-center">
        <div class="col">
            <h3 class="page-title">Payslip</h3>
            <ul class="breadcrumb">
                <li class="breadcrumb-item">Dashboard</a></li>
                <li class="breadcrumb-item active">Payslip</li>
            </ul>
        </div>
        <div class="col-auto float-right ml-auto">
            <div class="btn-group btn-group-sm">
                <a href="{% url 'download_payslip_csv' payroll.id %}" class="btn btn-white">CSV</a>
                <a href="{% url 'download_payslip_pdf' payroll.id %}" class="btn btn-white">PDF</a>
                <button onclick="window.print()" class="btn btn-white"><i class="fa fa-print fa-lg"></i> Print</button>
            </div>
        </div>
    </div>
</div>
<!-- /Page Header -->

<div class="row">
    <div class="col-md-12">
        <div class="card">
            <div class="card-body">

                <!-- Payslip Title -->
                <h4 class="payslip-title">Payslip for the month of {{ payroll.month }}</h4>

                <!-- Company and Payslip Info -->
                <div class="row">
                    <div class="col-sm-6 mb-3">
                        <img src="{% static 'assets/img/logo2.png' %}" class="inv-logo mb-2 pb-2" alt="Logo" style="height: 80px;">
                        <ul class="list-unstyled mb-0">
                            <li><strong>Qubits</strong></li>
                            <li>3864 Quiet Valley Lane,</li>
                            <li>Sherman Oaks, CA, 91403</li>
                        </ul>
                    </div>
                    <div class="col-sm-6 mb-3 text-sm-end">
                        <div class="invoice-details">
                            <h3 class="text-uppercase">Payslip #{{ payroll.id }}</h3>
                            <ul class="list-unstyled">
                                <li>Salary Month: <span>{{ payroll.month }}</span></li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Employee Info -->
                <div class="row">
                    <div class="col-lg-12 mb-3">
                        <ul class="list-unstyled">
                            <li><h5 class="mb-0"><strong>{{ payroll.employee_name }}</strong></h5></li>
                            <li><span>{{ payroll.designation }}</span></li>
                            <li>Employee ID: {{ payroll.employee_code }}</li>
                            <li>Joining Date: {{ payroll.joining_date|date:"j M Y" }}</li>
                        </ul>
                    </div>
                </div>

                <!-- Salary Breakdown -->
                <div class="row">
                    <div class="col-sm-6">
                        <h4 class="mb-2"><strong>Earnings</strong></h4>
                        <table class="table table-bordered">
                            <tbody>
                                <tr><td><strong>Basic Salary</strong> <span class="float-end">₹{{ payroll.basic }}</span></td></tr>
                                <tr><td><strong>House Rent Allowance (H.R.A.)</strong> <span class="float-end">₹{{ payroll.hra }}</span></td></tr>
                                <tr><td><strong>Conveyance</strong> <span class="float-end">₹{{ payroll.conveyance }}</span></td></tr>
                                <tr><td><strong>Other Allowance</strong> <span class="float-end">₹{{ payroll.allowance }}</span></td></tr>
                                <tr><td><strong>Medical Allowance</strong> <span class="float-end">₹{{ payroll.medical_allowance }}</span></td></tr>
                                <tr><td><strong>Other Earnings</strong> <span class="float-end">₹{{ payroll.other_earnings }}</span></td></tr>
                                <tr><td><strong>Total Earnings</strong> <span class="float-end fw-bold">₹{{ payroll.gross_salary }}</span></td></tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="col-sm-6">
                        <h4 class="mb-2"><strong>Deductions</strong></h4>
                        <table class="table table-bordered">
                            <tbody>
                                <tr><td><strong>Tax Deducted at Source (T.D.S.)</strong> <span class="float-end">₹{{ payroll.tds }}</span></td></tr>
                                <tr><td><strong>Provident Fund</strong> <span class="float-end">₹{{ payroll.pf }}</span></td></tr>
                                <tr><td><strong>ESI</strong> <span class="float-end">₹{{ payroll.esi }}</span></td></tr>
                                <tr><td><strong>Loan</strong> <span class="float-end">₹{{ payroll.leave }}</span></td></tr>
                                <tr><td><strong>Professional Tax</strong> <span class="float-end">₹{{ payroll.professional_tax }}</span></td></tr>
                                <tr><td><strong>Labour Welfare</strong> <span class="float-end">₹{{ payroll.labour_welfare }}</span></td></tr>
                                <tr><td><strong>Other Deductions</strong> <span class="float-end">₹{{ payroll.other_deductions }}</span></td></tr>
                                <tr><td><strong>Total Deductions</strong> <span class="float-end fw-bold">₹{{ payroll.total_deductions }}</span></td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Net Salary -->
                <div class="mt-3">
                    <p><strong>Net Salary: ₹{{ payroll.net_salary }}</strong> ({{ payroll.net_salary_words }} only.)</p>
                </div>

            </div>
        </div>
    </div>
</div>
{% endblock %}
